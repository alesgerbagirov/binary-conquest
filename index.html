<div id="fk-wrapper" style="max-width:1200px;margin:0 auto;">
  <iframe
    id="fk-frame"
    src="https://ISTIFADECI.github.io/REPO/index.html"
    style="width:100%; border:0; border-radius:12px; display:block; height:600px; overflow:hidden;"
    loading="lazy"
    allow="autoplay; fullscreen; clipboard-read; clipboard-write; gamepad"
    title="Fateh Khan — strateji ağıl oyunu"
  ></iframe>
</div>

<script>
(function(){
  const frame = document.getElementById('fk-frame');
  // Təhlükəsizlik üçün domeni məhdudlaşdırmaq istəyirsənsə, boş qoyma:
  // const ALLOWED_ORIGIN = 'https://ISTIFADECI.github.io';
  const ALLOWED_ORIGIN = null;

  function setH(h){
    const clamped = Math.max(400, Math.min(h, 3000));
    frame.style.height = clamped + 'px';
  }

  window.addEventListener('message', function(ev){
    if (!ev.data || ev.data.type !== 'FK_IFRAME_SIZE') return;
    if (ALLOWED_ORIGIN && ev.origin !== ALLOWED_ORIGIN) return;
    setH(ev.data.height || 600);
  });

  // İlk yüklənmədə ölçü istə
  function ping(){ try{ frame.contentWindow.postMessage({type:'FK_REQUEST_SIZE'}, '*'); }catch(_){} }
  window.addEventListener('load', ()=>{ ping(); setTimeout(ping, 300); setTimeout(ping, 1000); });
  window.addEventListener('orientationchange', ()=> setTimeout(ping, 300));
})();
</script>
